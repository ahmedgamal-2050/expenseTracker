import{a as H,b as v,c as Q,d as J,f as h,g as R,h as K,i as U,j as W,k as X,l as Y,m as Z,n as ee,o as te,p as re}from"./chunk-LDYQVQSV.js";import{a as le,b as se}from"./chunk-PNCV5TP4.js";import{b as N}from"./chunk-42YHWVMV.js";import{a as T}from"./chunk-WHLJNQZ4.js";import{a as C,b as oe,c as ae}from"./chunk-4PRA6KJL.js";import{a as D,c as ie,d as ne}from"./chunk-STPF54XU.js";import{d as j}from"./chunk-GDROI6OP.js";import{j as L,p as $}from"./chunk-OSMZGMWD.js";import{$a as g,Ab as s,Bb as p,Fa as A,O as B,T as f,Wa as I,Xa as F,Y as b,Z as y,Za as M,_a as O,a as k,ab as n,b as E,bb as o,cb as _,fa as w,fb as P,ib as x,jb as G,pb as q,rb as V,sb as l,tb as z,ub as d,va as i}from"./chunk-YIYEQTYG.js";var S=class a{http=f($);getCategories(){let e=N.dashboard.categories.get;return this.http.get(e)}addCategory(e){let t=N.dashboard.categories.add;return this.http.post(t,e)}static \u0275fac=function(t){return new(t||a)};static \u0275prov=B({token:a,factory:a.\u0275fac,providedIn:"root"})};var pe=(a,e)=>e.key;function ce(a,e){if(a&1&&(n(0,"option",8),l(1),o()),a&2){let t=e.$implicit;g("value",t.key),i(),z(t.label)}}function ue(a,e){a&1&&(n(0,"p",13),l(1," Amount is required and must be greater than 0. "),o())}function ge(a,e){a&1&&(n(0,"p",13),l(1,"Date is required."),o())}function fe(a,e){if(a&1){let t=P();n(0,"button",24),x("click",function(){let c=b(t).$implicit,m=G();return y(m.onQuickCategorySelect(c.key))}),n(1,"span",31),s(2,"categoryOption"),_(3,"i-lucide",26),s(4,"categoryOption"),o(),n(5,"span",32),l(6),o()()}if(a&2){let t=e.$implicit;i(),V(t.isSelected?"bg-blue-600 text-white":p(2,6,t.key).style),i(2),g("img",p(4,8,t.key).icon),i(2),V(t.isSelected?"text-blue-700":"text-gray-700"),i(),d(" ",t.label," ")}}var me=class a{fb=f(ee);router=f(j);categoryService=f(S);expensesService=f(se);translate=f(ie);calendarIcon=C.Calendar;imageIcon=C.ImagePlus;chevronDown=C.ChevronDown;categories=w([]);plusIcon=C.Plus;form=this.fb.group({category:new h("",v.required),amount:new h(null,[v.required,v.min(.01)]),date:new h(null,v.required),receipt:new h(null)});toast=w({type:"success",message:""});ngOnInit(){this.getCategories()}getCategories(){this.categoryService.getCategories().subscribe(e=>{this.categories.set(e.map(t=>E(k({},t),{isSelected:!1})))})}onCategorySelect(e){let t=e.value;this.onQuickCategorySelect(t??"")}onQuickCategorySelect(e){this.categories.update(t=>t.map(r=>E(k({},r),{isSelected:r.key===e}))),this.form.patchValue({category:e})}onFileSelected(e){let r=e.target.files?.[0]??null;this.form.patchValue({receipt:r})}openDatePicker(e){typeof e.showPicker=="function"?e.showPicker():e.focus()}handleAddCategory(){console.log("add category")}submit(){if(this.form.invalid){this.form.markAllAsTouched(),this.toast.set({type:"error",message:this.translate.instant("expenses_form_screen_please_fix_highlighted_fields")});return}this.addExpenses()}addExpenses(){this.expensesService.addExpenses(this.form.value).subscribe(()=>{let e=JSON.parse(localStorage.getItem(D.expenses)??"[]");e.push(this.form.value),localStorage.setItem(D.expenses,JSON.stringify(e)),this.router.navigate(["/"+T.dashboard,T.home]),this.toast.set({type:"success",message:"Expense saved successfully."})})}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=A({type:a,selectors:[["app-expenses-form"]],decls:58,vars:36,consts:[["dateInput",""],[1,"text-center","text-lg","font-semibold","mb-4"],[1,"grid","lg:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"lg:col-span-2"],["for","categoryInput",1,"text-sm","font-medium","inline-block","pb-2"],[1,"relative"],["type","select","readonly","","id","categoryInput",1,"w-full","rounded-md","border","border-gray-200","bg-gray-100","px-3","py-2","text-sm","dark:border-gray-700","dark:bg-gray-800","appearance-none","placeholder:text-gray-500",3,"change","value"],["value","''"],[3,"value"],[1,"absolute","end-3","top-1/2","-translate-y-1/2","size-4","text-gray-500",3,"img"],[1,""],["for","amountInput",1,"text-sm","font-medium","inline-block","pb-2"],["type","number","formControlName","amount","placeholder","$ 500","step","0.01","min","0.01","id","amountInput",1,"w-full","rounded-md","border","border-gray-200","bg-gray-100","px-3","py-2","text-sm","dark:border-gray-700","dark:bg-gray-800","placeholder:text-gray-500"],[1,"mt-1","text-xs","text-red-600"],["for","dateInput",1,"text-sm","font-medium","inline-block","pb-2"],["type","date","formControlName","date","id","dateInput",1,"w-full","rounded-md","border","border-gray-200","bg-gray-100","px-3","py-2","text-start","text-sm","cursor-pointer","dark:border-gray-700","dark:bg-gray-800","placeholder:text-gray-500",3,"click"],["for","dateInput",1,"absolute","end-3","top-1/2","-translate-y-1/2","cursor-pointer"],[1,"absolute","end-3/4","top-1/2","-translate-y-1/2","size-4","text-gray-500",3,"img"],["for","receiptInput",1,"text-sm","font-medium","inline-block","pb-2"],["type","file","id","receiptInput",1,"w-full","rounded-md","border","border-gray-200","bg-gray-100","px-3","py-2","text-sm","file:hidden","dark:border-gray-700","dark:bg-gray-800","cursor-pointer","placeholder:text-gray-500",3,"change"],["for","receiptInput",1,"cursor-pointer"],[1,"text-base","font-semibold","mb-4"],[1,"grid","grid-cols-4","gap-4","md:grid-cols-6","lg:grid-cols-8"],["type","button",1,"flex","flex-col","items-center","gap-2","cursor-pointer"],["type","button",1,"flex","flex-col","items-center","gap-2","cursor-pointer",3,"click"],[1,"grid","place-items-center","rounded-full","size-12","border","border-blue-700","dark:border-gray-700","dark:bg-gray-800","text-blue-700"],[1,"size-5",3,"img"],[1,"text-2xs","text-gray-700","font-semibold"],[1,"lg:col-span-2","lg:mt-6","mt-4"],["type","submit",1,"mx-auto","block","w-full","max-w-md","rounded-md","bg-blue-600","px-4","py-3","text-white","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed"],[3,"toast"],[1,"grid","place-items-center","rounded-full","size-12"],[1,"text-2xs","font-semibold"]],template:function(t,r){if(t&1){let c=P();n(0,"h1",1),l(1),s(2,"translate"),o(),n(3,"form",2),x("ngSubmit",function(){return b(c),y(r.submit())}),n(4,"div",3)(5,"label",4),l(6),s(7,"translate"),o(),n(8,"div",5)(9,"select",6),x("change",function(u){return b(c),y(r.onCategorySelect(u.target))}),n(10,"option",7),l(11),s(12,"translate"),o(),M(13,ce,2,2,"option",8,pe),o(),_(15,"i-lucide",9),o()(),n(16,"div",10)(17,"label",11),l(18),s(19,"translate"),o(),_(20,"input",12),I(21,ue,2,0,"p",13),o(),n(22,"div",10)(23,"label",14),l(24),s(25,"translate"),o(),n(26,"div",5)(27,"input",15,0),x("click",function(){b(c);let u=q(28);return y(r.openDatePicker(u))}),o(),I(29,ge,2,0,"p",13),n(30,"label",16),_(31,"i-lucide",17),o()()(),n(32,"div",3)(33,"label",18),l(34),s(35,"translate"),o(),n(36,"div",5)(37,"input",19),x("change",function(u){return b(c),y(r.onFileSelected(u))}),o(),n(38,"label",20),_(39,"i-lucide",9),o()()(),n(40,"div",3)(41,"h2",21),l(42),s(43,"translate"),o(),n(44,"div",22),M(45,fe,7,10,"button",23,pe),n(47,"button",24),x("click",function(){return b(c),y(r.handleAddCategory())}),n(48,"span",25),_(49,"i-lucide",26),o(),n(50,"span",27),l(51),s(52,"translate"),o()()()(),n(53,"div",28)(54,"button",29),l(55),s(56,"translate"),o()()(),_(57,"app-toast",30)}if(t&2){let c,m,u;i(),d(" ",p(2,18,"expenses_form_screen_add_expense_title"),`
`),i(2),g("formGroup",r.form),i(3),d(" ",p(7,20,"expenses_form_screen_categories_label")," "),i(3),g("value",((c=r.form.get("category"))==null?null:c.value)??""),i(2),d(" ",p(12,22,"expenses_form_screen_select_category_label")," "),i(2),O(r.categories()),i(2),g("img",r.chevronDown),i(3),d(" ",p(19,24,"expenses_form_screen_amount_label")," "),i(3),F((m=r.form.get("amount"))!=null&&m.touched&&((m=r.form.get("amount"))!=null&&m.invalid)?21:-1),i(3),d(" ",p(25,26,"expenses_form_screen_date_label")," "),i(5),F((u=r.form.get("date"))!=null&&u.touched&&((u=r.form.get("date"))!=null&&u.invalid)?29:-1),i(2),g("img",r.calendarIcon),i(3),d(" ",p(35,28,"expenses_form_screen_attach_receipt_label")," "),i(5),g("img",r.imageIcon),i(3),d(" ",p(43,30,"expenses_form_screen_categories_label")," "),i(3),O(r.categories()),i(4),g("img",r.plusIcon),i(2),d(" ",p(52,32,"expenses_form_screen_add_category_label")," "),i(4),d(" ",p(56,34,"expenses_form_screen_save_label")," "),i(2),g("toast",r.toast())}},dependencies:[L,te,R,X,Y,H,K,Q,J,Z,U,W,ae,oe,re,le,ne],styles:["html[dir=rtl][_nghost-%COMP%]   input[type=date][_ngcontent-%COMP%]::-webkit-datetime-edit, html[dir=rtl]   [_nghost-%COMP%]   input[type=date][_ngcontent-%COMP%]::-webkit-datetime-edit, html[dir=rtl][_nghost-%COMP%]   input[type=date][_ngcontent-%COMP%]::-webkit-datetime-edit-fields-wrapper, html[dir=rtl]   [_nghost-%COMP%]   input[type=date][_ngcontent-%COMP%]::-webkit-datetime-edit-fields-wrapper, html[dir=rtl][_nghost-%COMP%]   input[type=date][_ngcontent-%COMP%]::-webkit-date-and-time-value, html[dir=rtl]   [_nghost-%COMP%]   input[type=date][_ngcontent-%COMP%]::-webkit-date-and-time-value{direction:rtl;text-align:end}"]})};export{me as ExpensesFormComponent};
