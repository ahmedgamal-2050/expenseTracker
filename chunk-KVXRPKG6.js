import{a as k,b,c as T,d as D,e as R,f as w,g as A,i as G,j as M,o as B,p as P}from"./chunk-LDYQVQSV.js";import{b as j}from"./chunk-42YHWVMV.js";import{a as y}from"./chunk-WHLJNQZ4.js";import{a as S,c as q,d as O}from"./chunk-STPF54XU.js";import{d as I}from"./chunk-GDROI6OP.js";import{p as E}from"./chunk-OSMZGMWD.js";import{$a as f,Ab as p,Bb as m,Fa as C,O as L,T as s,Wa as _,Xa as x,ab as n,bb as o,cb as h,fa as u,ib as F,sb as r,ub as c,va as i,wb as N}from"./chunk-YIYEQTYG.js";var v=class e{http=s(E);login(t){let a=j.auth.login;return this.http.get(a)}static \u0275fac=function(a){return new(a||e)};static \u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"})};function J(e,t){e&1&&(n(0,"p",7),r(1,"Invalid email address."),o())}function z(e,t){e&1&&(n(0,"p",7),r(1,"Password is required."),o())}var V=class e{authService=s(v);router=s(I);translate=s(q);isLoading=u(!1);toast=u({type:"success",message:""});loginForm=u(new R({email:new w("",[b.required,b.email]),password:new w("",[b.required])}));onSubmit(){if(this.loginForm().invalid){this.loginForm().markAllAsTouched(),this.toast.set({type:"error",message:this.translate.instant("login_screen_please_fix_highlighted_fields")});return}this.successLogin()}successLogin(){this.isLoading.set(!0),this.authService.login(this.loginForm().value).subscribe({next:t=>{this.handleSuccessLogin(t)},error:()=>{this.isLoading.set(!1),this.toast.set({type:"error",message:this.translate.instant("login_screen_login_failed")})}})}handleSuccessLogin(t){localStorage.setItem(S.token,t.token),localStorage.setItem(S.user,JSON.stringify(t.user)),this.router.navigate([y.dashboard,y.home]),this.isLoading.set(!1),this.toast.set({type:"success",message:this.translate.instant("login_screen_welcome_back")})}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=C({type:e,selectors:[["app-login"]],decls:24,vars:21,consts:[[1,"w-full"],[1,"text-2xl","font-bold","text-center","text-blue-700","mb-15"],[1,"text-center","text-gray-900","text-xl","font-bold","mb-6"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","text-gray-900","text-sm","font-semibold","mb-1"],["type","email","id","email","autocomplete","email","formControlName","email",1,"p-3","text-gray-700","bg-gray-50","placeholder:text-gray-300","focus:outline-none","focus:shadow-outline","text-sm","w-full",3,"placeholder"],[1,"mt-1","text-xs","text-red-600"],["for","password",1,"block","text-gray-900","text-sm","font-semibold","mb-1"],["type","password","id","password","autocomplete","current-password","placeholder","**********","formControlName","password",1,"p-3","text-gray-700","bg-gray-50","placeholder:text-gray-300","focus:outline-none","focus:shadow-outline","text-sm","w-full"],["type","submit",1,"mt-4","bg-blue-600","hover:bg-blue-800","text-white","font-normal","py-2","px-4","rounded-lg","focus:outline-none","focus:shadow-outline","w-full"],[3,"toast","position"]],template:function(a,l){if(a&1&&(n(0,"section",0)(1,"h1",1),r(2," Expense Tracker Logo "),o(),n(3,"h5",2),r(4),p(5,"translate"),o(),n(6,"form",3),F("ngSubmit",function(){return l.onSubmit()}),n(7,"div",4)(8,"label",5),r(9),p(10,"translate"),o(),h(11,"input",6),p(12,"translate"),_(13,J,2,0,"p",7),o(),n(14,"div",4)(15,"label",8),r(16),p(17,"translate"),o(),h(18,"input",9),_(19,z,2,0,"p",7),o(),n(20,"button",10),r(21),p(22,"translate"),o()()(),h(23,"app-toast",11)),a&2){let d,g;i(4),c(" ",m(5,11,"login_screen_login_label")," "),i(2),f("formGroup",l.loginForm()),i(3),c(" ",m(10,13,"login_screen_email_label")," "),i(2),f("placeholder",N(m(12,15,"login_screen_email_placeholder"))),i(2),x((d=l.loginForm().get("email"))!=null&&d.touched&&((d=l.loginForm().get("email"))!=null&&d.invalid)?13:-1),i(3),c(" ",m(17,17,"login_screen_password_label")," "),i(3),x((g=l.loginForm().get("password"))!=null&&g.touched&&((g=l.loginForm().get("password"))!=null&&g.invalid)?19:-1),i(2),c(" ",m(22,19,"login_screen_login_label")," "),i(2),f("toast",l.toast())("position","top-1 end-1")}},dependencies:[B,A,k,T,D,G,M,P,O],encapsulation:2})};export{V as LoginComponent};
